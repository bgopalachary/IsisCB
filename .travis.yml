language: python
python:
- '2.7'
env:
  global:
    - DJANGO_SETTINGS_MODULE=isiscb.local_settings
script:
- pip install nose
- cd isiscb
- git clone http://github.com/ubernostrum/django-registration.git --depth 2
- python manage.py migrate
- python -Wi manage.py test
deploy:
  - provider: codedeploy
    access_key_id: AKIAIVNDMWM77W3N2KTA
    region: us-west-2
    bucket: S3 Bucket
    revision_type: github
    application: "isiscb-develop-app"
    deployment_group: "isiscb-develop-deploymentgroup"
    secret_access_key:
      secure: "osQ5jCPZsn/RasLViriEYTNElAwIKFkkG5fmurDeeV/PrtUuk/u4Bi5mXDw5LLp8RCggEQAExTiAcJKvERUGkNrkRB4p7ExeoTzEf8YaBfwwXotZ4YtdiEt/iIa53aIAZz2pVLpDeJ3pK1OyK/jQPLE5yCwHEDLZVWMNtjXE1fmPVsQWX5p+5VK5ntEeZjMunZBgZFa6B2uvGNJFVhK5ymFREkoJT3lqH4cavD1ddf5lP1wjf0YtAqmuVaRZzyOIN/zdPMEsj5G38na7p/d89kCfSr6X9+0EMOso3l0MXztKoBiY9x0REV9GH8UGoJV2pltljw/CNRcE2BZg7x4SamZRmeLNx2409Xk5JAQ2AQ7/rCQweCEmIPCLZMmMz99i5UzsZ8Y/pgNBRLS9qwugXssvQd7ypJnce0iRueCndX1C2Al4XnomTwlHWamwvtC/CszMlT1zFLvi0DiUOyX0dYm1MzpBDPB/Gy8T7JJ9zRigZ9QzqapDi6mZ2D2Dt7rT0CQL6kdZIy7upFReEs5pNaNn64hlK5PVTa9dn7hO8O2T6J9gvbTi0xXhefPGaHnOUtQeOtJBe/xStbz8RKSn7XIXt9VYtgiJ4RfW2YAiofnGhnwQYy5HKJgbrPGC1uCHAeNpR5uq5AQEVbET8lghuoqm97lw1VtbVMYuB17AWnQ="
    on:
      branch: develop
  - provider: elasticbeanstalk
    access_key_id: AKIAI3SRBWU3O3X5S7CQ
    secret_access_key:
      secure: "GjBYzAtG9+/7pXKskXe2Iv+vNiCV9MlNOT8vwx6EfMqvUU4GZQJiNvUUGzTBNgFxZoVJIKdG5Vye7HhIGoKGqTNcSJMq4L1hCqQQXOEV8D26fAECbNamUfOVEiny50YiYnnVOp4CyDCK6jqdCHe3f2cBoaU7ei7Mf0dMO4LKkiuXC9iez7LGMJv588m8IErxYCnP5SsXWOn6Sr75tKRQ3KC9JQKR0iejzR+Os6tldNv5Pq8kESBsBDCIBRaQv+UlzLOSuYJltufXhnLoeViEF5Xsc9d9sR7QsKeoAIy/9rOKDH6D1Km85AshmdaO0z+I1ASTFBRlvuaGUvmmZLJORK5MF/3wBh/gqsofOdSK8Ki78qyJ9kDim3iP7R84RYstyFvqbqY7GQy8jfZl8CtvVOwfQ5dL/b9Dl4SoxZKIIN6yzf30zZhChFh/wZUwc15voNyetcgQS/BAkCOxD/z3XEGJbpED56KQ0IkhBRrxTAZIYsfwMtSmKcEqJRr09vxCg/WLaA2BlVoSmm0hn4RouxpWqxJJcG3ZC4C8KUk3jIwTxdq2fAtFgbJpfIvMEXPIbQDqBAK03Ly8qJeWqSbQBSUmQOiRNUO6CsLci4OALI33xfbHqVcpuccUlYFO/7KqMOrOsgFDiO/FCntrxJo/uVpqQ54Hxl4GwrjaeeeGDJE="
    region: us-west-2
    app: isiscb
    env: isiscb-staging
    bucket_name: elasticbeanstalk-us-west-2-655333410217
    on:
      repo: upconsulting/IsisCB
      branch: master
